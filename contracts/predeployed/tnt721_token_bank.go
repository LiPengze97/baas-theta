package predeployed

import (
	"encoding/hex"
	"math/big"

	"github.com/thetatoken/theta/common"
	"github.com/thetatoken/theta/crypto"
	"github.com/thetatoken/theta/ledger/types"
	"github.com/thetatoken/thetasubchain/core"
	slst "github.com/thetatoken/thetasubchain/ledger/state"
)

const TNT721TokenBankContractBytecode = "608060405234801561001057600080fd5b5060008081905550615300806100276000396000f3fe608060405260043610620000aa5760003560e01c8063938d5f21116200006d578063938d5f211462000205578063a2cc69811462000233578063b83f29011462000277578063c27d927a1462000297578063ebda996214620002c7578063f6a3d24e146200030b57620000aa565b80631527b14d14620000af578063261a323e14620000f457806327ca4df11462000138578063588b1408146200017c57806360569b5e14620001c0575b600080fd5b348015620000bc57600080fd5b50620000db6004803603810190620000d5919062001624565b6200034f565b604051620000eb92919062001a2e565b60405180910390f35b3480156200010157600080fd5b506200012060048036038101906200011a919062001624565b620003b6565b6040516200012f919062001b2e565b60405180910390f35b3480156200014557600080fd5b506200016460048036038101906200015e919062001808565b620003ff565b60405162000173919062001a11565b60405180910390f35b3480156200018957600080fd5b50620001a86004803603810190620001a2919062001808565b6200043f565b604051620001b7919062001b4b565b60405180910390f35b348015620001cd57600080fd5b50620001ec6004803603810190620001e691906200158e565b620004f4565b604051620001fc92919062001b6f565b60405180910390f35b3480156200021257600080fd5b506200023160048036038101906200022b9190620016f0565b620005b5565b005b3480156200024057600080fd5b506200025f600480360381019062000259919062001624565b620008ef565b6040516200026e919062001a11565b60405180910390f35b6200029560048036038101906200028f919062001675565b620009c5565b005b348015620002a457600080fd5b50620002af62000bdf565b604051620002be919062001c4d565b60405180910390f35b348015620002d457600080fd5b50620002f36004803603810190620002ed91906200158e565b62000be5565b60405162000302919062001b4b565b60405180910390f35b3480156200031857600080fd5b506200033760048036038101906200033191906200158e565b62000d1c565b60405162000346919062001b2e565b60405180910390f35b6001818051602081018201805184825260208301602085012081835280955050505050506000915090508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060000160149054906101000a900460ff16905082565b600080620003c48362000d75565b9050600181604051620003d89190620019f8565b908152602001604051809103902060000160149054906101000a900460ff16915050919050565b600381815481106200041057600080fd5b906000526020600020016000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600481815481106200045057600080fd5b9060005260206000200160009150905080546200046d9062001f06565b80601f01602080910402602001604051908101604052809291908181526020018280546200049b9062001f06565b8015620004ec5780601f10620004c057610100808354040283529160200191620004ec565b820191906000526020600020905b815481529060010190602001808311620004ce57829003601f168201915b505050505081565b6002602052806000526040600020600091509050806000018054620005199062001f06565b80601f0160208091040260200160405190810160405280929190818152602001828054620005479062001f06565b8015620005985780601f106200056c5761010080835404028352916020019162000598565b820191906000526020600020905b8154815290600101906020018083116200057a57829003601f168201915b5050505050908060010160009054906101000a900460ff16905082565b600080602067ffffffffffffffff811115620005d657620005d56200204d565b5b6040519080825280601f01601f191660200182016040528015620006095781602001600182028036833780820191505090505b50905060008060b573ffffffffffffffffffffffffffffffffffffffff1683604051620006379190620019df565b6000604051808303816000865af19150503d806000811462000676576040519150601f19603f3d011682016040523d82523d6000602084013e6200067b565b606091505b509150915081620006c3576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620006ba9062001bc5565b60405180910390fd5b6000620006d08262000d89565b9050600181149450846200071b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620007129062001c2b565b60405180910390fd5b6000620007288c62000d75565b90503073ffffffffffffffffffffffffffffffffffffffff1663261a323e826040518263ffffffff1660e01b815260040162000765919062001b4b565b60206040518083038186803b1580156200077e57600080fd5b505afa15801562000793573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190620007b99190620015f2565b620007d757620007d681620007d0838e8e62000e82565b62000ed7565b5b60003073ffffffffffffffffffffffffffffffffffffffff1663a2cc6981836040518263ffffffff1660e01b815260040162000814919062001b4b565b60206040518083038186803b1580156200082d57600080fd5b505afa15801562000842573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190620008689190620015c0565b905062000878818b8b8b620011af565b8973ffffffffffffffffffffffffffffffffffffffff16826040516200089f9190620019f8565b60405180910390207fd30e6d7e5f81482a1b9afd534f1dc867eb47b915e64dbcf0f11652c136b951c48b604051620008d8919062001c4d565b60405180910390a350505050505050505050505050565b600080620008fd8362000d75565b90506000600182604051620009139190620019f8565b90815260200160405180910390206040518060400160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016000820160149054906101000a900460ff1615151515815250509050806020015115620009b957806000015192505050620009c0565b6000925050505b919050565b6000620009d28462000d75565b90503073ffffffffffffffffffffffffffffffffffffffff1663261a323e826040518263ffffffff1660e01b815260040162000a0f919062001b4b565b60206040518083038186803b15801562000a2857600080fd5b505afa15801562000a3d573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062000a639190620015f2565b62000aa5576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040162000a9c9062001c09565b60405180910390fd5b60003073ffffffffffffffffffffffffffffffffffffffff1663a2cc6981836040518263ffffffff1660e01b815260040162000ae2919062001b4b565b60206040518083038186803b15801562000afb57600080fd5b505afa15801562000b10573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062000b369190620015c0565b9050600033905062000b4a8282866200122e565b62000b54620012aa565b8473ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff168460405162000b929190620019f8565b60405180910390207f9adb8c348515d8930de0c9f33c3f295a6c8c28989cfd9d22cb4055309360eb148760005460405162000bcf92919062001c6a565b60405180910390a4505050505050565b60005481565b60606000600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060405180604001604052908160008201805462000c459062001f06565b80601f016020809104026020016040519081016040528092919081815260200182805462000c739062001f06565b801562000cc45780601f1062000c985761010080835404028352916020019162000cc4565b820191906000526020600020905b81548152906001019060200180831162000ca657829003601f168201915b505050505081526020016001820160009054906101000a900460ff161515151581525050905080602001511562000d0357806000015191505062000d17565b604051806020016040528060008152509150505b919050565b6000600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060010160009054906101000a900460ff169050919050565b606062000d8282620012c7565b9050919050565b600080600083519050602081111562000dd9576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040162000dd09062001be7565b60405180910390fd5b60005b8181101562000e745760088183602062000df7919062001e2f565b62000e03919062001d33565b62000e0f919062001dce565b60ff60f81b86838151811062000e2a5762000e296200201e565b5b602001015160f81c60f81b167effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916901c83179250808062000e6b9062001f72565b91505062000ddc565b508160001c92505050919050565b60008030905060008186868660405162000e9c90620013f6565b62000eab949392919062001a5b565b604051809103906000f08015801562000ec8573d6000803e3d6000fd5b50905080925050509392505050565b600062000ee48362000d75565b90503073ffffffffffffffffffffffffffffffffffffffff1663261a323e826040518263ffffffff1660e01b815260040162000f21919062001b4b565b60206040518083038186803b15801562000f3a57600080fd5b505afa15801562000f4f573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062000f759190620015f2565b1562000fb8576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040162000faf9062001ba3565b60405180910390fd5b60405180604001604052808373ffffffffffffffffffffffffffffffffffffffff1681526020016001151581525060018260405162000ff89190620019f8565b908152602001604051809103902060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160000160146101000a81548160ff021916908315150217905550905050604051806040016040528082815260200160011515815250600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000820151816000019080519060200190620010e592919062001404565b5060208201518160010160006101000a81548160ff0219169083151502179055509050506003829080600181540180825580915050600190039060005260206000200160009091909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600481908060018154018082558091505060019003906000526020600020016000909190919091509080519060200190620011a992919062001404565b50505050565b60008490508073ffffffffffffffffffffffffffffffffffffffff1663d3fc98648585856040518463ffffffff1660e01b8152600401620011f39392919062001aea565b600060405180830381600087803b1580156200120e57600080fd5b505af115801562001223573d6000803e3d6000fd5b505050505050505050565b60008390508073ffffffffffffffffffffffffffffffffffffffff16639dc29fac84846040518363ffffffff1660e01b81526004016200127092919062001abd565b600060405180830381600087803b1580156200128b57600080fd5b505af1158015620012a0573d6000803e3d6000fd5b5050505050505050565b6001600080828254620012be919062001d33565b92505081905550565b6060600082905060005b8151811015620013615762001306828281518110620012f557620012f46200201e565b5b602001015160f81c60f81b6200136b565b8282815181106200131c576200131b6200201e565b5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053508080620013589062001f72565b915050620012d1565b5080915050919050565b6000604160f81b827effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191610158015620013ca5750605a60f81b827effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191611155b15620013ed5760208260f81c620013e2919062001d90565b60f81b9050620013f1565b8190505b919050565b61300480620022c783390190565b828054620014129062001f06565b90600052602060002090601f01602090048101928262001436576000855562001482565b82601f106200145157805160ff191683800117855562001482565b8280016001018555821562001482579182015b828111156200148157825182559160200191906001019062001464565b5b50905062001491919062001495565b5090565b5b80821115620014b057600081600090555060010162001496565b5090565b6000620014cb620014c58462001cc0565b62001c97565b905082815260208101848484011115620014ea57620014e962002081565b5b620014f784828562001ec1565b509392505050565b600081359050620015108162002278565b92915050565b600081519050620015278162002278565b92915050565b6000815190506200153e8162002292565b92915050565b600082601f8301126200155c576200155b6200207c565b5b81356200156e848260208601620014b4565b91505092915050565b6000813590506200158881620022ac565b92915050565b600060208284031215620015a757620015a66200208b565b5b6000620015b784828501620014ff565b91505092915050565b600060208284031215620015d957620015d86200208b565b5b6000620015e98482850162001516565b91505092915050565b6000602082840312156200160b576200160a6200208b565b5b60006200161b848285016200152d565b91505092915050565b6000602082840312156200163d576200163c6200208b565b5b600082013567ffffffffffffffff8111156200165e576200165d62002086565b5b6200166c8482850162001544565b91505092915050565b6000806000606084860312156200169157620016906200208b565b5b600084013567ffffffffffffffff811115620016b257620016b162002086565b5b620016c08682870162001544565b9350506020620016d386828701620014ff565b9250506040620016e68682870162001577565b9150509250925092565b60008060008060008060c0878903121562001710576200170f6200208b565b5b600087013567ffffffffffffffff81111562001731576200173062002086565b5b6200173f89828a0162001544565b965050602087013567ffffffffffffffff81111562001763576200176262002086565b5b6200177189828a0162001544565b955050604087013567ffffffffffffffff81111562001795576200179462002086565b5b620017a389828a0162001544565b9450506060620017b689828a01620014ff565b9350506080620017c989828a0162001577565b92505060a087013567ffffffffffffffff811115620017ed57620017ec62002086565b5b620017fb89828a0162001544565b9150509295509295509295565b6000602082840312156200182157620018206200208b565b5b6000620018318482850162001577565b91505092915050565b620018458162001e6a565b82525050565b620018568162001e7e565b82525050565b6000620018698262001cf6565b62001875818562001d0c565b93506200188781856020860162001ed0565b80840191505092915050565b6000620018a08262001d01565b620018ac818562001d17565b9350620018be81856020860162001ed0565b620018c98162002090565b840191505092915050565b6000620018e18262001d01565b620018ed818562001d28565b9350620018ff81856020860162001ed0565b80840191505092915050565b60006200191a60398362001d17565b91506200192782620020a1565b604082019050919050565b600062001941604d8362001d17565b91506200194e82620020f0565b606082019050919050565b60006200196860258362001d17565b9150620019758262002165565b604082019050919050565b60006200198f60458362001d17565b91506200199c82620021b4565b606082019050919050565b6000620019b660388362001d17565b9150620019c38262002229565b604082019050919050565b620019d98162001eaa565b82525050565b6000620019ed82846200185c565b915081905092915050565b600062001a068284620018d4565b915081905092915050565b600060208201905062001a2860008301846200183a565b92915050565b600060408201905062001a4560008301856200183a565b62001a5460208301846200184b565b9392505050565b600060808201905062001a7260008301876200183a565b818103602083015262001a86818662001893565b9050818103604083015262001a9c818562001893565b9050818103606083015262001ab2818462001893565b905095945050505050565b600060408201905062001ad460008301856200183a565b62001ae36020830184620019ce565b9392505050565b600060608201905062001b0160008301866200183a565b62001b106020830185620019ce565b818103604083015262001b24818462001893565b9050949350505050565b600060208201905062001b4560008301846200184b565b92915050565b6000602082019050818103600083015262001b67818462001893565b905092915050565b6000604082019050818103600083015262001b8b818562001893565b905062001b9c60208301846200184b565b9392505050565b6000602082019050818103600083015262001bbe816200190b565b9050919050565b6000602082019050818103600083015262001be08162001932565b9050919050565b6000602082019050818103600083015262001c028162001959565b9050919050565b6000602082019050818103600083015262001c248162001980565b9050919050565b6000602082019050818103600083015262001c4681620019a7565b9050919050565b600060208201905062001c646000830184620019ce565b92915050565b600060408201905062001c816000830185620019ce565b62001c906020830184620019ce565b9392505050565b600062001ca362001cb6565b905062001cb1828262001f3c565b919050565b6000604051905090565b600067ffffffffffffffff82111562001cde5762001cdd6200204d565b5b62001ce98262002090565b9050602081019050919050565b600081519050919050565b600081519050919050565b600081905092915050565b600082825260208201905092915050565b600081905092915050565b600062001d408262001eaa565b915062001d4d8362001eaa565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0382111562001d855762001d8462001fc0565b5b828201905092915050565b600062001d9d8262001eb4565b915062001daa8362001eb4565b92508260ff0382111562001dc35762001dc262001fc0565b5b828201905092915050565b600062001ddb8262001eaa565b915062001de88362001eaa565b9250817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff048311821515161562001e245762001e2362001fc0565b5b828202905092915050565b600062001e3c8262001eaa565b915062001e498362001eaa565b92508282101562001e5f5762001e5e62001fc0565b5b828203905092915050565b600062001e778262001e8a565b9050919050565b60008115159050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b600060ff82169050919050565b82818337600083830152505050565b60005b8381101562001ef057808201518184015260208101905062001ed3565b8381111562001f00576000848401525b50505050565b6000600282049050600182168062001f1f57607f821691505b6020821081141562001f365762001f3562001fef565b5b50919050565b62001f478262002090565b810181811067ffffffffffffffff8211171562001f695762001f686200204d565b5b80604052505050565b600062001f7f8262001eaa565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82141562001fb55762001fb462001fc0565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600080fd5b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f566f75636865724d61702e616464566f75636865723a20616e20766f7563686560008201527f7220636f6e747261637420616c72656164792065786973747300000000000000602082015250565b7f537562636861696e544675656c546f6b656e42616e6b2e70726976696c65676560008201527f644163636573734f6e6c793a206661696c656420746f20636865636b2074686560208201527f20616363657373206c6576656c00000000000000000000000000000000000000604082015250565b7f627974657320746f2075696e7432353620636f6e76657273696f6e206f76657260008201527f666c6f7773000000000000000000000000000000000000000000000000000000602082015250565b7f537562636861696e544e54373231546f6b656e42616e6b2e6275726e566f756360008201527f686572733a20766f756368657220636f6e747261637420646f6573206e6f742060208201527f6578697374000000000000000000000000000000000000000000000000000000604082015250565b7f566f75636865724d61702e70726976696c656765644163636573734f6e6c793a60008201527f20696e73756666696369656e742070726976696c656765730000000000000000602082015250565b620022838162001e6a565b81146200228f57600080fd5b50565b6200229d8162001e7e565b8114620022a957600080fd5b50565b620022b78162001eaa565b8114620022c357600080fd5b5056fe60806040523480156200001157600080fd5b506040516200300438038062003004833981810160405281019062000037919062000220565b838282816000908051906020019062000052929190620000db565b5080600190805190602001906200006b929190620000db565b50505080600660006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550508260079080519060200190620000c8929190620000db565b50600060088190555050505050620004c1565b828054620000e990620003b8565b90600052602060002090601f0160209004810192826200010d576000855562000159565b82601f106200012857805160ff191683800117855562000159565b8280016001018555821562000159579182015b82811115620001585782518255916020019190600101906200013b565b5b5090506200016891906200016c565b5090565b5b80821115620001875760008160009055506001016200016d565b5090565b6000620001a26200019c8462000318565b620002ef565b905082815260208101848484011115620001c157620001c062000487565b5b620001ce84828562000382565b509392505050565b600081519050620001e781620004a7565b92915050565b600082601f83011262000205576200020462000482565b5b8151620002178482602086016200018b565b91505092915050565b600080600080608085870312156200023d576200023c62000491565b5b60006200024d87828801620001d6565b945050602085015167ffffffffffffffff8111156200027157620002706200048c565b5b6200027f87828801620001ed565b935050604085015167ffffffffffffffff811115620002a357620002a26200048c565b5b620002b187828801620001ed565b925050606085015167ffffffffffffffff811115620002d557620002d46200048c565b5b620002e387828801620001ed565b91505092959194509250565b6000620002fb6200030e565b9050620003098282620003ee565b919050565b6000604051905090565b600067ffffffffffffffff82111562000336576200033562000453565b5b620003418262000496565b9050602081019050919050565b60006200035b8262000362565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60005b83811015620003a257808201518184015260208101905062000385565b83811115620003b2576000848401525b50505050565b60006002820490506001821680620003d157607f821691505b60208210811415620003e857620003e762000424565b5b50919050565b620003f98262000496565b810181811067ffffffffffffffff821117156200041b576200041a62000453565b5b80604052505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600080fd5b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b620004b2816200034e565b8114620004be57600080fd5b50565b612b3380620004d16000396000f3fe608060405234801561001057600080fd5b50600436106101165760003560e01c80638da5cb5b116100a2578063b88d4fde11610071578063b88d4fde146102df578063c370b042146102fb578063c87b56dd14610319578063d3fc986414610349578063e985e9c51461036557610116565b80638da5cb5b1461026b57806395d89b41146102895780639dc29fac146102a7578063a22cb465146102c357610116565b806318160ddd116100e957806318160ddd146101b557806323b872dd146101d357806342842e0e146101ef5780636352211e1461020b57806370a082311461023b57610116565b806301ffc9a71461011b57806306fdde031461014b578063081812fc14610169578063095ea7b314610199575b600080fd5b61013560048036038101906101309190611dd8565b610395565b6040516101429190612172565b60405180910390f35b610153610477565b604051610160919061218d565b60405180910390f35b610183600480360381019061017e9190611e32565b610509565b604051610190919061210b565b60405180910390f35b6101b360048036038101906101ae9190611d29565b61058e565b005b6101bd6106a6565b6040516101ca919061238f565b60405180910390f35b6101ed60048036038101906101e89190611c13565b6106b0565b005b61020960048036038101906102049190611c13565b610710565b005b61022560048036038101906102209190611e32565b610730565b604051610232919061210b565b60405180910390f35b61025560048036038101906102509190611ba6565b6107e2565b604051610262919061238f565b60405180910390f35b61027361089a565b604051610280919061210b565b60405180910390f35b6102916108c0565b60405161029e919061218d565b60405180910390f35b6102c160048036038101906102bc9190611d29565b610952565b005b6102dd60048036038101906102d89190611ce9565b610ab3565b005b6102f960048036038101906102f49190611c66565b610ac9565b005b610303610b2b565b604051610310919061218d565b60405180910390f35b610333600480360381019061032e9190611e32565b610bbd565b604051610340919061218d565b60405180910390f35b610363600480360381019061035e9190611d69565b610c62565b005b61037f600480360381019061037a9190611bd3565b610d0d565b60405161038c9190612172565b60405180910390f35b60007f80ac58cd000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148061046057507f5b5e139f000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b80610470575061046f82610da1565b5b9050919050565b606060008054610486906125a9565b80601f01602080910402602001604051908101604052809291908181526020018280546104b2906125a9565b80156104ff5780601f106104d4576101008083540402835291602001916104ff565b820191906000526020600020905b8154815290600101906020018083116104e257829003601f168201915b5050505050905090565b600061051482610e0b565b610553576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161054a9061230f565b60405180910390fd5b6004600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b600061059982610730565b90508073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16141561060a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106019061232f565b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff16610629610e77565b73ffffffffffffffffffffffffffffffffffffffff161480610658575061065781610652610e77565b610d0d565b5b610697576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161068e9061228f565b60405180910390fd5b6106a18383610e7f565b505050565b6000600854905090565b6106c16106bb610e77565b82610f38565b610700576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106f79061234f565b60405180910390fd5b61070b838383611016565b505050565b61072b83838360405180602001604052806000815250610ac9565b505050565b6000806002600084815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614156107d9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107d0906122cf565b60405180910390fd5b80915050919050565b60008073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415610853576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161084a906122af565b60405180910390fd5b600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6060600180546108cf906125a9565b80601f01602080910402602001604051908101604052809291908181526020018280546108fb906125a9565b80156109485780601f1061091d57610100808354040283529160200191610948565b820191906000526020600020905b81548152906001019060200180831161092b57829003601f168201915b5050505050905090565b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146109ac57600080fd5b6000600854116109f1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109e89061236f565b60405180910390fd5b60006109fc82610730565b90508273ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614610a6c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a63906121cf565b60405180910390fd5b610a758261127d565b600960008381526020019081526020016000206000610a94919061197a565b600160086000828254610aa791906124bf565b92505081905550505050565b610ac5610abe610e77565b838361139a565b5050565b610ada610ad4610e77565b83610f38565b610b19576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b109061234f565b60405180910390fd5b610b2584848484611507565b50505050565b606060078054610b3a906125a9565b80601f0160208091040260200160405190810160405280929190818152602001828054610b66906125a9565b8015610bb35780601f10610b8857610100808354040283529160200191610bb3565b820191906000526020600020905b815481529060010190602001808311610b9657829003601f168201915b5050505050905090565b6060600960008381526020019081526020016000208054610bdd906125a9565b80601f0160208091040260200160405190810160405280929190818152602001828054610c09906125a9565b8015610c565780601f10610c2b57610100808354040283529160200191610c56565b820191906000526020600020905b815481529060010190602001808311610c3957829003601f168201915b50505050509050919050565b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610cbc57600080fd5b610cc68383611563565b80600960008481526020019081526020016000209080519060200190610ced9291906119ba565b50600160086000828254610d019190612469565b92505081905550505050565b6000600560008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b60007f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b60008073ffffffffffffffffffffffffffffffffffffffff166002600084815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614159050919050565b600033905090565b816004600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff16610ef283610730565b73ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a45050565b6000610f4382610e0b565b610f82576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f799061226f565b60405180910390fd5b6000610f8d83610730565b90508073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161480610fcf5750610fce8185610d0d565b5b8061100d57508373ffffffffffffffffffffffffffffffffffffffff16610ff584610509565b73ffffffffffffffffffffffffffffffffffffffff16145b91505092915050565b8273ffffffffffffffffffffffffffffffffffffffff1661103682610730565b73ffffffffffffffffffffffffffffffffffffffff161461108c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611083906121ef565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1614156110fc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110f39061222f565b60405180910390fd5b611107838383611581565b611112600082610e7f565b6001600360008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825461116291906124bf565b925050819055506001600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546111b99190612469565b92505081905550816002600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4611278838383611586565b505050565b600061128882610730565b905061129681600084611581565b6112a1600083610e7f565b6001600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546112f191906124bf565b925050819055506002600083815260200190815260200160002060006101000a81549073ffffffffffffffffffffffffffffffffffffffff021916905581600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a461139681600084611586565b5050565b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161415611409576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016114009061224f565b60405180910390fd5b80600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31836040516114fa9190612172565b60405180910390a3505050565b611512848484611016565b61151e8484848461158b565b61155d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611554906121af565b60405180910390fd5b50505050565b61157d828260405180602001604052806000815250611722565b5050565b505050565b505050565b60006115ac8473ffffffffffffffffffffffffffffffffffffffff1661177d565b15611715578373ffffffffffffffffffffffffffffffffffffffff1663150b7a026115d5610e77565b8786866040518563ffffffff1660e01b81526004016115f79493929190612126565b602060405180830381600087803b15801561161157600080fd5b505af192505050801561164257506040513d601f19601f8201168201806040525081019061163f9190611e05565b60015b6116c5573d8060008114611672576040519150601f19603f3d011682016040523d82523d6000602084013e611677565b606091505b506000815114156116bd576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016116b4906121af565b60405180910390fd5b805181602001fd5b63150b7a0260e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161491505061171a565b600190505b949350505050565b61172c83836117a0565b611739600084848461158b565b611778576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161176f906121af565b60405180910390fd5b505050565b6000808273ffffffffffffffffffffffffffffffffffffffff163b119050919050565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415611810576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611807906122ef565b60405180910390fd5b61181981610e0b565b15611859576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016118509061220f565b60405180910390fd5b61186560008383611581565b6001600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546118b59190612469565b92505081905550816002600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a461197660008383611586565b5050565b508054611986906125a9565b6000825580601f1061199857506119b7565b601f0160209004906000526020600020908101906119b69190611a40565b5b50565b8280546119c6906125a9565b90600052602060002090601f0160209004810192826119e85760008555611a2f565b82601f10611a0157805160ff1916838001178555611a2f565b82800160010185558215611a2f579182015b82811115611a2e578251825591602001919060010190611a13565b5b509050611a3c9190611a40565b5090565b5b80821115611a59576000816000905550600101611a41565b5090565b6000611a70611a6b846123cf565b6123aa565b905082815260208101848484011115611a8c57611a8b61269e565b5b611a97848285612567565b509392505050565b6000611ab2611aad84612400565b6123aa565b905082815260208101848484011115611ace57611acd61269e565b5b611ad9848285612567565b509392505050565b600081359050611af081612aa1565b92915050565b600081359050611b0581612ab8565b92915050565b600081359050611b1a81612acf565b92915050565b600081519050611b2f81612acf565b92915050565b600082601f830112611b4a57611b49612699565b5b8135611b5a848260208601611a5d565b91505092915050565b600082601f830112611b7857611b77612699565b5b8135611b88848260208601611a9f565b91505092915050565b600081359050611ba081612ae6565b92915050565b600060208284031215611bbc57611bbb6126a8565b5b6000611bca84828501611ae1565b91505092915050565b60008060408385031215611bea57611be96126a8565b5b6000611bf885828601611ae1565b9250506020611c0985828601611ae1565b9150509250929050565b600080600060608486031215611c2c57611c2b6126a8565b5b6000611c3a86828701611ae1565b9350506020611c4b86828701611ae1565b9250506040611c5c86828701611b91565b9150509250925092565b60008060008060808587031215611c8057611c7f6126a8565b5b6000611c8e87828801611ae1565b9450506020611c9f87828801611ae1565b9350506040611cb087828801611b91565b925050606085013567ffffffffffffffff811115611cd157611cd06126a3565b5b611cdd87828801611b35565b91505092959194509250565b60008060408385031215611d0057611cff6126a8565b5b6000611d0e85828601611ae1565b9250506020611d1f85828601611af6565b9150509250929050565b60008060408385031215611d4057611d3f6126a8565b5b6000611d4e85828601611ae1565b9250506020611d5f85828601611b91565b9150509250929050565b600080600060608486031215611d8257611d816126a8565b5b6000611d9086828701611ae1565b9350506020611da186828701611b91565b925050604084013567ffffffffffffffff811115611dc257611dc16126a3565b5b611dce86828701611b63565b9150509250925092565b600060208284031215611dee57611ded6126a8565b5b6000611dfc84828501611b0b565b91505092915050565b600060208284031215611e1b57611e1a6126a8565b5b6000611e2984828501611b20565b91505092915050565b600060208284031215611e4857611e476126a8565b5b6000611e5684828501611b91565b91505092915050565b611e68816124f3565b82525050565b611e7781612505565b82525050565b6000611e8882612431565b611e928185612447565b9350611ea2818560208601612576565b611eab816126ad565b840191505092915050565b6000611ec18261243c565b611ecb8185612458565b9350611edb818560208601612576565b611ee4816126ad565b840191505092915050565b6000611efc603283612458565b9150611f07826126be565b604082019050919050565b6000611f1f601383612458565b9150611f2a8261270d565b602082019050919050565b6000611f42602583612458565b9150611f4d82612736565b604082019050919050565b6000611f65601c83612458565b9150611f7082612785565b602082019050919050565b6000611f88602483612458565b9150611f93826127ae565b604082019050919050565b6000611fab601983612458565b9150611fb6826127fd565b602082019050919050565b6000611fce602c83612458565b9150611fd982612826565b604082019050919050565b6000611ff1603883612458565b9150611ffc82612875565b604082019050919050565b6000612014602a83612458565b915061201f826128c4565b604082019050919050565b6000612037602983612458565b915061204282612913565b604082019050919050565b600061205a602083612458565b915061206582612962565b602082019050919050565b600061207d602c83612458565b91506120888261298b565b604082019050919050565b60006120a0602183612458565b91506120ab826129da565b604082019050919050565b60006120c3603183612458565b91506120ce82612a29565b604082019050919050565b60006120e6601083612458565b91506120f182612a78565b602082019050919050565b6121058161255d565b82525050565b60006020820190506121206000830184611e5f565b92915050565b600060808201905061213b6000830187611e5f565b6121486020830186611e5f565b61215560408301856120fc565b81810360608301526121678184611e7d565b905095945050505050565b60006020820190506121876000830184611e6e565b92915050565b600060208201905081810360008301526121a78184611eb6565b905092915050565b600060208201905081810360008301526121c881611eef565b9050919050565b600060208201905081810360008301526121e881611f12565b9050919050565b6000602082019050818103600083015261220881611f35565b9050919050565b6000602082019050818103600083015261222881611f58565b9050919050565b6000602082019050818103600083015261224881611f7b565b9050919050565b6000602082019050818103600083015261226881611f9e565b9050919050565b6000602082019050818103600083015261228881611fc1565b9050919050565b600060208201905081810360008301526122a881611fe4565b9050919050565b600060208201905081810360008301526122c881612007565b9050919050565b600060208201905081810360008301526122e88161202a565b9050919050565b600060208201905081810360008301526123088161204d565b9050919050565b6000602082019050818103600083015261232881612070565b9050919050565b6000602082019050818103600083015261234881612093565b9050919050565b60006020820190508181036000830152612368816120b6565b9050919050565b60006020820190508181036000830152612388816120d9565b9050919050565b60006020820190506123a460008301846120fc565b92915050565b60006123b46123c5565b90506123c082826125db565b919050565b6000604051905090565b600067ffffffffffffffff8211156123ea576123e961266a565b5b6123f3826126ad565b9050602081019050919050565b600067ffffffffffffffff82111561241b5761241a61266a565b5b612424826126ad565b9050602081019050919050565b600081519050919050565b600081519050919050565b600082825260208201905092915050565b600082825260208201905092915050565b60006124748261255d565b915061247f8361255d565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156124b4576124b361260c565b5b828201905092915050565b60006124ca8261255d565b91506124d58361255d565b9250828210156124e8576124e761260c565b5b828203905092915050565b60006124fe8261253d565b9050919050565b60008115159050919050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b82818337600083830152505050565b60005b83811015612594578082015181840152602081019050612579565b838111156125a3576000848401525b50505050565b600060028204905060018216806125c157607f821691505b602082108114156125d5576125d461263b565b5b50919050565b6125e4826126ad565b810181811067ffffffffffffffff821117156126035761260261266a565b5b80604052505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600080fd5b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4552433732313a207472616e7366657220746f206e6f6e20455243373231526560008201527f63656976657220696d706c656d656e7465720000000000000000000000000000602082015250565b7f6f6e6c79206f776e65722063616e206275726e00000000000000000000000000600082015250565b7f4552433732313a207472616e736665722066726f6d20696e636f72726563742060008201527f6f776e6572000000000000000000000000000000000000000000000000000000602082015250565b7f4552433732313a20746f6b656e20616c7265616479206d696e74656400000000600082015250565b7f4552433732313a207472616e7366657220746f20746865207a65726f2061646460008201527f7265737300000000000000000000000000000000000000000000000000000000602082015250565b7f4552433732313a20617070726f766520746f2063616c6c657200000000000000600082015250565b7f4552433732313a206f70657261746f7220717565727920666f72206e6f6e657860008201527f697374656e7420746f6b656e0000000000000000000000000000000000000000602082015250565b7f4552433732313a20617070726f76652063616c6c6572206973206e6f74206f7760008201527f6e6572206e6f7220617070726f76656420666f7220616c6c0000000000000000602082015250565b7f4552433732313a2062616c616e636520717565727920666f7220746865207a6560008201527f726f206164647265737300000000000000000000000000000000000000000000602082015250565b7f4552433732313a206f776e657220717565727920666f72206e6f6e657869737460008201527f656e7420746f6b656e0000000000000000000000000000000000000000000000602082015250565b7f4552433732313a206d696e7420746f20746865207a65726f2061646472657373600082015250565b7f4552433732313a20617070726f76656420717565727920666f72206e6f6e657860008201527f697374656e7420746f6b656e0000000000000000000000000000000000000000602082015250565b7f4552433732313a20617070726f76616c20746f2063757272656e74206f776e6560008201527f7200000000000000000000000000000000000000000000000000000000000000602082015250565b7f4552433732313a207472616e736665722063616c6c6572206973206e6f74206f60008201527f776e6572206e6f7220617070726f766564000000000000000000000000000000602082015250565b7f6e6f20746f6b656e20746f206275726e00000000000000000000000000000000600082015250565b612aaa816124f3565b8114612ab557600080fd5b50565b612ac181612505565b8114612acc57600080fd5b50565b612ad881612511565b8114612ae357600080fd5b50565b612aef8161255d565b8114612afa57600080fd5b5056fea264697066735822122019a919e76ea9e186cbc2238776f31b6f4181663f9547b3a5024b0d98c946a79a64736f6c63430008070033a264697066735822122054e17be63eb1c4e88b8c7af1d1c128761057b8fab436902a0c26f52236759cb164736f6c63430008070033"

var mintTNT721VouchersFuncSelector = crypto.Keccak256([]byte("mintVouchers(string,string,string,address,uint,string)"))[:4]

// TNT721TokenBank implements the TokenBank interface.
type TNT721TokenBank struct {
}

func NewTNT721TokenBank() *TNT721TokenBank {
	return &TNT721TokenBank{}
}

// Mint vouchers for the token transferred cross-chain. If the voucher contract for the token does not yet exist, the
// TokenBank contract deploys the the vouncher contract first and then mints the vouchers in the same call.
// Note: if a user calls the the TNT721TokenBank.mintVouchers() function, the transaction should fail with the "evm revert" error.
//       This is because mintVouchers() is only allowed in the privileged execution context
func (tb *TNT721TokenBank) GenerateMintVouchersProxySctx(blockProposer common.Address, view *slst.StoreView, ccte *core.CrossChainTNT721TransferEvent) (*types.SmartContractTx, error) {
	voucherReceiver := ccte.Receiver
	denom := ccte.Denom
	name := ccte.Name
	symbol := ccte.Symbol
	tokenID := ccte.TokenID
	tokenURI := ccte.TokenURI

	calldata := tb.encodeCalldata(denom, name, symbol, voucherReceiver, tokenID, tokenURI)
	tnt721okenBankContractAddr := view.GetTNT721TokenBankContractAddress()
	sctx, err := constructProxySmartContractTx(blockProposer, *tnt721okenBankContractAddr, calldata)
	if err != nil {
		return nil, err
	}

	return sctx, nil
}

// Calldata encoding standard: https://medium.com/@libertylocked/what-are-abi-encoding-functions-in-solidity-0-4-24-c1a90b5ddce8
// function mintVouchers(string memory denom, string memory name, string memory symbol, uint8 decimals, address voucherReceiver, uint mintAmount)
// Assume that we pass the following parameters to the function:
//     denom          : mainnet/721/0x0480c1097197831a1e4e9d64574f0048f8e35628
//     name           : American Idol 20th Season Finalists
//     symbol         : AI20
//     voucherReceiver: 0x2E833968E5bB786Ae419c4d13189fB081Cc43bab
//     tokenID        : 2076
//     tokenURI       : https://api.thetadrop.com/type/type_qyh516vms3hz4b24n8x8wcq3pgf.json?nft_id=nft_n5gr1291uge56ydf1cv0kvguaxzw
// Then, the calldata for the above function and params is: 0x938d5f2100000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000001800000000000000000000000002e833968e5bb786ae419c4d13189fb081cc43bab000000000000000000000000000000000000000000000000000000000000081c00000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000000366d61696e6e65742f3732312f307830343830633130393731393738333161316534653964363435373466303034386638653335363238000000000000000000000000000000000000000000000000000000000000000000000000000000000023416d65726963616e2049646f6c203230746820536561736f6e2046696e616c69737473000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044149323000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006c68747470733a2f2f6170692e746865746164726f702e636f6d2f747970652f747970655f717968353136766d7333687a346232346e387838776371337067662e6a736f6e3f6e66745f69643d6e66745f6e356772313239317567653536796466316376306b76677561787a770000000000000000000000000000000000000000
//
// Let's break the above calldata into parts, and see what each part represents:
//
// 938d5f21 // the function selector, i.e mintTNT721VouchersFuncSelector
// 00000000000000000000000000000000000000000000000000000000000000c0 // offset of the first parameter, i.e denom
// 0000000000000000000000000000000000000000000000000000000000000120 // offset of the second parameter, i.e name
// 0000000000000000000000000000000000000000000000000000000000000180 // offset of the third parameter, i.e symbol
// 0000000000000000000000002e833968e5bb786ae419c4d13189fb081cc43bab // voucherReceiver, left padded to 32 bytes with zeros
// 000000000000000000000000000000000000000000000000000000000000081c // tokenID, 0x81c = 2076
// 00000000000000000000000000000000000000000000000000000000000001c0 // offset of the last parameter, i.e. tokenURI
// 0000000000000000000000000000000000000000000000000000000000000036 // length of the first parameter, i.e. denom
// 6d61696e6e65742f3732312f3078303438306331303937313937383331613165 // denom, right padded to 64 bytes with zeros, where "6d61...3238" is the UTF8-Hex encoding of "mainnet/721/0x0480c1097197831a1e4e9d64574f0048f8e35628"
// 3465396436343537346630303438663865333536323800000000000000000000
// 0000000000000000000000000000000000000000000000000000000000000023 // length of the second parameter, i.e. name
// 416d65726963616e2049646f6c203230746820536561736f6e2046696e616c69 // name, right padded to 64 bytes with zeros, where "416d...7473" is the UTF8-Hex encoding of "American Idol 20th Season Finalists"
// 7374730000000000000000000000000000000000000000000000000000000000
// 0000000000000000000000000000000000000000000000000000000000000004 // length of the third parameter, i.e. symbol
// 4149323000000000000000000000000000000000000000000000000000000000 // symbol, right padded to 64 bytes with zeros, where "41493230" is the UTF8-Hex encoding of "AI20"
// 000000000000000000000000000000000000000000000000000000000000006c // length of the last parameter, i.e. tokenURI
// 68747470733a2f2f6170692e746865746164726f702e636f6d2f747970652f74 // tokenURI, right padded to 64 bytes with zeros, where "6874...7a77" is the UTF8-Hex encoding of "https://api.thetadrop.com/type/type_qyh516vms3hz4b24n8x8wcq3pgf.json?nft_id=nft_n5gr1291uge56ydf1cv0kvguaxzw"
// 7970655f717968353136766d7333687a346232346e387838776371337067662e
// 6a736f6e3f6e66745f69643d6e66745f6e356772313239317567653536796466
// 316376306b76677561787a770000000000000000000000000000000000000000

func (tb *TNT721TokenBank) encodeCalldata(denom string, name string, symbol string, voucherReceiver common.Address, tokenID *big.Int, tokenURI string) []byte {
	denomData, denomSize := packStringParam(denom)
	nameData, nameSize := packStringParam(name)
	symbolData, symbolSize := packStringParam(symbol)
	tokenURIData, _ := packStringParam(tokenURI)

	denomParamOffset := 6 * wordSizeInBytes // 6: the offsets of the three string params, plus decimals, voucherReceiver, and mintAmount that fit into one word
	nameParamOffset := denomParamOffset + denomSize
	symbolParamOffset := nameParamOffset + nameSize
	tokenURIParamOffset := symbolParamOffset + symbolSize

	// the function selector
	calldata := append([]byte{}, mintTNT20VouchersFuncSelector...)

	// the offsets
	calldata = append(calldata, packUintParam(denomParamOffset)...)
	calldata = append(calldata, packUintParam(nameParamOffset)...)
	calldata = append(calldata, packUintParam(symbolParamOffset)...)

	// the params that can fit into one word
	calldata = append(calldata, packAddressParam(voucherReceiver)...)
	calldata = append(calldata, packBigIntParam(tokenID)...)

	// more offsets
	calldata = append(calldata, packUintParam(tokenURIParamOffset)...)

	// rest of the params
	calldata = append(calldata, denomData...)
	calldata = append(calldata, nameData...)
	calldata = append(calldata, symbolData...)
	calldata = append(calldata, tokenURIData...)

	logger.Debugf("mint TNT721 voucher sctx calldata: %v", hex.EncodeToString(calldata))

	return calldata
}
